<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Ứng dụng học Toán lớp 9 chuẩn SGK, miễn phí, ôn thi vào lớp 10 hiệu quả.">
  <title>Toán 9 – Chuẩn SGK | Ôn thi vào lớp 10</title>

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1976d2">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX', {
      page_path: window.location.pathname,
      anonymize_ip: true,
      cookie_flags: 'SameSite=None;Secure'
    });
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js');
      });
    }
  </script>
</head>
<body>
  <header>
    <h1>📘 TOÁN LỚP 9</h1>
    <p>Chuẩn chương trình SGK – Bộ GD&ĐT | Ôn thi vào lớp 10 hiệu quả</p>
    <button id="theme-toggle" aria-label="Chuyển đổi chế độ sáng/tối">🌙</button>
  </header>

  <!-- THANH TÌM KIẾM MỞ RỘNG -->
  <div class="search-box" style="max-width:900px;margin:0 auto;padding:0 1rem;">
    <input type="text" id="global-search" placeholder="🔍 Tìm kiếm kiến thức (ví dụ: căn bậc hai, hệ thức lượng, phương trình bậc hai...)">
  </div>

  <nav class="tabs">
    <button class="tab-btn active" data-tab="home">Trang chủ</button>
    <button class="tab-btn" data-tab="dai-so">Đại số</button>
    <button class="tab-btn" data-tab="hinh-hoc">Hình học</button>
    <button class="tab-btn" data-tab="on-thi">Ôn thi vào 10</button>
  </nav>

  <main id="content">
    <!-- Trang chủ -->
    <section id="home-content" class="active">
      <div class="card">
        <h2>Chào mừng bạn đến với Toán 9 chuẩn SGK!</h2>
        <p>Ứng dụng này được biên soạn dựa trên <strong>Sách giáo khoa Toán 9 (NXB Giáo dục Việt Nam, 2024)</strong>.</p>
        <ul>
          <li>✅ <strong>23 bài Đại số</strong>: Căn bậc hai – Hàm số bậc nhất – Hệ phương trình – Phương trình bậc hai</li>
          <li>✅ <strong>17 bài Hình học</strong>: Hệ thức lượng – Đường tròn – Góc với đường tròn – Hình trụ – nón – cầu</li>
          <li>✅ <strong>4 đề kiểm tra 15 phút</strong> theo từng chương</li>
          <li>✅ <strong>4 đề kiểm tra 1 tiết</strong> theo từng chương</li>
          <li>✅ <strong>10 đề ôn thi vào lớp 10</strong> theo cấu trúc Sở GD&ĐT Hà Nội, TP.HCM, Đà Nẵng, Bình Dương...</li>
          <li>✅ Miễn phí 100%, không quảng cáo, chạy tốt trên điện thoại</li>
          <li>✅ Hỗ trợ chế độ tối, xuất PDF, cài như app</li>
        </ul>
        <p><em>Hãy chọn mục bên trên để bắt đầu học!</em></p>
      </div>
    </section>

    <!-- Đại số -->
    <section id="dai-so-content" class="hidden">
      <h2>📘 Đại số</h2>
      <div id="dai-so-list"></div>
      <div class="back-buttons">
        <button onclick="window.history.back()">← Quay lại trang trước</button>
        <a href="./">🏠 Quay về trang chủ</a>
      </div>
    </section>

    <!-- Hình học -->
    <section id="hinh-hoc-content" class="hidden">
      <h2>📐 Hình học</h2>
      <div id="hinh-hoc-list"></div>
      <div class="back-buttons">
        <button onclick="window.history.back()">← Quay lại trang trước</button>
        <a href="./">🏠 Quay về trang chủ</a>
      </div>
    </section>

    <!-- Ôn thi -->
    <section id="on-thi-content" class="hidden">
      <div class="card">
        <h2>🎯 Đề ôn thi vào lớp 10</h2>
        <ul>
          <li><a href="exercises/de-on-thi-vao-10-mau-1.html">Mẫu 1 – Hà Nội</a></li>
          <li><a href="exercises/de-on-thi-vao-10-mau-2.html">Mẫu 2 – TP.HCM</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-3.html">Đề 3 – Tổng hợp (dễ)</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-4.html">Đề 4 – Hà Nội</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-5.html">Đề 5 – Đà Nẵng</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-6.html">Đề 6 – Nâng cao</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-7.html">Đề 7 – Trung bình</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-8.html">Đề 8 – Bình Dương</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-9.html">Đề 9 – Cho HS giỏi</a></li>
          <li><a href="exercises/de-on-thi-vao-10-de-10.html">Đề 10 – Tổng kết</a></li>
        </ul>
        
        <h2>📝 Đề kiểm tra 15 phút</h2>
        <ul>
          <li><a href="exercises/de-kiem-tra-15p-ch1.html">Chương I: Căn bậc hai</a></li>
          <li><a href="exercises/de-kiem-tra-15p-ch2.html">Chương II: Hàm số bậc nhất</a></li>
          <li><a href="exercises/de-kiem-tra-15p-ch3.html">Chương III: Hệ phương trình</a></li>
          <li><a href="exercises/de-kiem-tra-15p-ch4.html">Chương IV: Phương trình bậc hai</a></li>
        </ul>

        <h2>⏱️ Đề kiểm tra 1 tiết</h2>
        <ul>
          <li><a href="exercises/de-kiem-tra-1-tiet-ch1.html">ĐS Chương I</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-ch2.html">ĐS Chương II</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-ch3.html">ĐS Chương III</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-ch4.html">ĐS Chương IV</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-hh-ch1.html">HH Chương I</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-hh-ch2.html">HH Chương II</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-hh-ch3.html">HH Chương III</a></li>
          <li><a href="exercises/de-kiem-tra-1-tiet-hh-ch4.html">HH Chương IV</a></li>
        </ul>
      </div>
      <div class="back-buttons">
        <button onclick="window.history.back()">← Quay lại trang trước</button>
        <a href="./">🏠 Quay về trang chủ</a>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2026 | HSTAI 777 – Hỗ trợ học sinh Việt Nam | Dựa trên SGK Toán 9, NXB Giáo dục Việt Nam, 2024</p>
  </footer>

  <!-- Dark Mode -->
  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const isDark = localStorage.getItem('theme') === 'dark' || 
                   (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches);
    
    if (isDark) {
      document.body.classList.add('dark-mode');
      themeToggle.textContent = '☀️';
    }

    themeToggle?.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isNowDark = document.body.classList.contains('dark-mode');
      localStorage.setItem('theme', isNowDark ? 'dark' : 'light');
      themeToggle.textContent = isNowDark ? '☀️' : '🌙';
    });
  </script>

  <!-- Tải dữ liệu bài học NGAY KHI TRANG CHẠY -->
  <script>
    // Dữ liệu cứng (inline) để tránh "Đang tải..."
    const DS_DATA = {
      "chuong1": {
        "ten": "Chương I: Căn bậc hai. Căn bậc ba",
        "bai": [
          {"ma":"ds-ch1-bai1","ten":"Bài 1: Căn bậc hai","file":"lessons/ds-ch1-bai1.html"},
          {"ma":"ds-ch1-bai2","ten":"Bài 2: Căn thức bậc hai và hằng đẳng thức \\(\\sqrt{A^2} = |A|\\)","file":"lessons/ds-ch1-bai2.html"},
          {"ma":"ds-ch1-bai3","ten":"Bài 3: Liên hệ giữa phép nhân và phép khai phương","file":"lessons/ds-ch1-bai3.html"},
          {"ma":"ds-ch1-bai4","ten":"Bài 4: Liên hệ giữa phép chia và phép khai phương","file":"lessons/ds-ch1-bai4.html"},
          {"ma":"ds-ch1-bai5","ten":"Bài 5: Biến đổi đơn giản biểu thức chứa căn bậc hai","file":"lessons/ds-ch1-bai5.html"},
          {"ma":"ds-ch1-bai6","ten":"Bài 6: Rút gọn biểu thức chứa căn bậc hai","file":"lessons/ds-ch1-bai6.html"},
          {"ma":"ds-ch1-bai7","ten":"Bài 7: Căn bậc ba","file":"lessons/ds-ch1-bai7.html"}
        ]
      },
      "chuong2": {
        "ten": "Chương II: Hàm số bậc nhất",
        "bai": [
          {"ma":"ds-ch2-bai1","ten":"Bài 1: Nhắc lại và bổ sung các khái niệm về hàm số","file":"lessons/ds-ch2-bai1.html"},
          {"ma":"ds-ch2-bai2","ten":"Bài 2: Hàm số bậc nhất","file":"lessons/ds-ch2-bai2.html"},
          {"ma":"ds-ch2-bai3","ten":"Bài 3: Đồ thị của hàm số \\(y = ax + b\\)","file":"lessons/ds-ch2-bai3.html"},
          {"ma":"ds-ch2-bai4","ten":"Bài 4: Đường thẳng song song và đường thẳng cắt nhau","file":"lessons/ds-ch2-bai4.html"},
          {"ma":"ds-ch2-bai5","ten":"Bài 5: Hệ số góc của đường thẳng \\(y = ax + b\\)","file":"lessons/ds-ch2-bai5.html"}
        ]
      },
      "chuong3": {
        "ten": "Chương III: Hệ hai phương trình bậc nhất hai ẩn",
        "bai": [
          {"ma":"ds-ch3-bai1","ten":"Bài 1: Phương trình bậc nhất hai ẩn","file":"lessons/ds-ch3-bai1.html"},
          {"ma":"ds-ch3-bai2","ten":"Bài 2: Hệ hai phương trình bậc nhất hai ẩn","file":"lessons/ds-ch3-bai2.html"},
          {"ma":"ds-ch3-bai3","ten":"Bài 3: Giải hệ phương trình bằng phương pháp thế","file":"lessons/ds-ch3-bai3.html"},
          {"ma":"ds-ch3-bai4","ten":"Bài 4: Giải hệ phương trình bằng phương pháp cộng đại số","file":"lessons/ds-ch3-bai4.html"},
          {"ma":"ds-ch3-bai5","ten":"Bài 5: Giải bài toán bằng cách lập hệ phương trình","file":"lessons/ds-ch3-bai5.html"}
        ]
      },
      "chuong4": {
        "ten": "Chương IV: Hàm số \\(y = ax^2\\) (\\(a \\ne 0\\)). Phương trình bậc hai một ẩn",
        "bai": [
          {"ma":"ds-ch4-bai1","ten":"Bài 1: Hàm số \\(y = ax^2\\)","file":"lessons/ds-ch4-bai1.html"},
          {"ma":"ds-ch4-bai2","ten":"Bài 2: Đồ thị của hàm số \\(y = ax^2\\)","file":"lessons/ds-ch4-bai2.html"},
          {"ma":"ds-ch4-bai3","ten":"Bài 3: Phương trình bậc hai một ẩn","file":"lessons/ds-ch4-bai3.html"},
          {"ma":"ds-ch4-bai4","ten":"Bài 4: Công thức nghiệm của phương trình bậc hai","file":"lessons/ds-ch4-bai4.html"},
          {"ma":"ds-ch4-bai5","ten":"Bài 5: Hệ thức Vi-ét và ứng dụng","file":"lessons/ds-ch4-bai5.html"},
          {"ma":"ds-ch4-bai6","ten":"Bài 6: Giải bài toán bằng cách lập phương trình bậc hai","file":"lessons/ds-ch4-bai6.html"}
        ]
      }
    };

    const HH_DATA = {
      "chuong1": {
        "ten": "Chương I: Hệ thức lượng trong tam giác vuông",
        "bai": [
          {"ma":"hh-ch1-bai1","ten":"Bài 1: Một số hệ thức về cạnh và đường cao trong tam giác vuông","file":"lessons/hh-ch1-bai1.html"},
          {"ma":"hh-ch1-bai2","ten":"Bài 2: Tỉ số lượng giác của góc nhọn","file":"lessons/hh-ch1-bai2.html"},
          {"ma":"hh-ch1-bai3","ten":"Bài 3: Bảng lượng giác","file":"lessons/hh-ch1-bai3.html"},
          {"ma":"hh-ch1-bai4","ten":"Bài 4: Một số hệ thức về cạnh và góc trong tam giác vuông","file":"lessons/hh-ch1-bai4.html"}
        ]
      },
      "chuong2": {
        "ten": "Chương II: Đường tròn",
        "bai": [
          {"ma":"hh-ch2-bai1","ten":"Bài 1: Sự xác định đường tròn. Tính chất đối xứng của đường tròn","file":"lessons/hh-ch2-bai1.html"},
          {"ma":"hh-ch2-bai2","ten":"Bài 2: Đường kính và dây của đường tròn","file":"lessons/hh-ch2-bai2.html"},
          {"ma":"hh-ch2-bai3","ten":"Bài 3: Liên hệ giữa dây và khoảng cách từ tâm đến dây","file":"lessons/hh-ch2-bai3.html"},
          {"ma":"hh-ch2-bai4","ten":"Bài 4: Vị trí tương đối của đường thẳng và đường tròn","file":"lessons/hh-ch2-bai4.html"},
          {"ma":"hh-ch2-bai5","ten":"Bài 5: Dấu hiệu nhận biết tiếp tuyến của đường tròn","file":"lessons/hh-ch2-bai5.html"},
          {"ma":"hh-ch2-bai6","ten":"Bài 6: Tính chất của hai tiếp tuyến cắt nhau","file":"lessons/hh-ch2-bai6.html"},
          {"ma":"hh-ch2-bai7","ten":"Bài 7: Vị trí tương đối của hai đường tròn","file":"lessons/hh-ch2-bai7.html"}
        ]
      },
      "chuong3": {
        "ten": "Chương III: Góc với đường tròn",
        "bai": [
          {"ma":"hh-ch3-bai1","ten":"Bài 1: Góc ở tâm. Số đo cung","file":"lessons/hh-ch3-bai1.html"},
          {"ma":"hh-ch3-bai2","ten":"Bài 2: Liên hệ giữa cung và dây","file":"lessons/hh-ch3-bai2.html"},
          {"ma":"hh-ch3-bai3","ten":"Bài 3: Góc nội tiếp","file":"lessons/hh-ch3-bai3.html"},
          {"ma":"hh-ch3-bai4","ten":"Bài 4: Góc tạo bởi tia tiếp tuyến và dây cung","file":"lessons/hh-ch3-bai4.html"},
          {"ma":"hh-ch3-bai5","ten":"Bài 5: Góc có đỉnh ở bên trong đường tròn. Góc có đỉnh ở bên ngoài đường tròn","file":"lessons/hh-ch3-bai5.html"},
          {"ma":"hh-ch3-bai6","ten":"Bài 6: Cung chứa góc","file":"lessons/hh-ch3-bai6.html"}
        ]
      },
      "chuong4": {
        "ten": "Chương IV: Hình trụ - Hình nón - Hình cầu",
        "bai": [
          {"ma":"hh-ch4-bai1","ten":"Bài 1: Hình trụ. Diện tích xung quanh và thể tích","file":"lessons/hh-ch4-bai1.html"},
          {"ma":"hh-ch4-bai2","ten":"Bài 2: Hình nón - Hình nón cụt","file":"lessons/hh-ch4-bai2.html"},
          {"ma":"hh-ch4-bai3","ten":"Bài 3: Hình cầu. Diện tích mặt cầu và thể tích","file":"lessons/hh-ch4-bai3.html"}
        ]
      }
    };

    // Render ngay khi load
    function renderLessons() {
      let dsHtml = '';
      for (const ch of Object.values(DS_DATA)) {
        dsHtml += `<h3>${ch.ten}</h3>`;
        for (const bai of ch.bai) {
          dsHtml += `<div class="chapter-item"><a href="${bai.file}">${bai.ten}</a></div>`;
        }
      }
      document.getElementById('dai-so-list').innerHTML = dsHtml;

      let hhHtml = '';
      for (const ch of Object.values(HH_DATA)) {
        hhHtml += `<h3>${ch.ten}</h3>`;
        for (const bai of ch.bai) {
          hhHtml += `<div class="chapter-item"><a href="${bai.file}">${bai.ten}</a></div>`;
        }
      }
      document.getElementById('hinh-hoc-list').innerHTML = hhHtml;
    }

    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#content > section').forEach(s => s.classList.remove('active'));
        btn.classList.add('active');
        const tabId = btn.getAttribute('data-tab') + '-content';
        document.getElementById(tabId).classList.add('active');
      });
    });

    // Tìm kiếm
    document.getElementById('global-search')?.addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase();
      if (term.trim() === '') return;

      // Gợi ý nhanh (có thể mở rộng thành modal)
      alert(`Bạn đang tìm: "${term}"\nTính năng tìm kiếm nâng cao sẽ được phát triển trong phiên bản tiếp theo.`);
    });

    // Load ngay
    renderLessons();
  </script>

  <style>
    .search-box {
      padding: 0.8rem 0;
      background: var(--bg-primary);
    }
    #global-search {
      width: 100%;
      padding: 0.6rem 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    .back-buttons {
      margin-top: 1.5rem;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .back-buttons button,
    .back-buttons a {
      background: #e3f2fd;
      color: #1976d2;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }
    .back-buttons button:hover,
    .back-buttons a:hover {
      background: #bbdefb;
    }
  </style>
</body>
</html>